var storageName,storageEmail,btnContact=document.querySelector(".button__contact"),modalWriteUs=document.querySelector(".modal__write-us"),mapLink=document.querySelector(".map-link"),modalMap=document.querySelector(".modal__map"),modalClose=document.querySelectorAll(".modal-close"),modalOverlay=document.querySelector(".modal-overlay"),formWriteUs=document.querySelector(".write-us"),nameField=document.querySelector('[name="name"]'),emailField=document.querySelector('[name="email"]'),textField=document.querySelector('[name="text"]'),modalCloseAct=function(e){e.preventDefault(),modalWriteUs.classList.contains("modal-show")?modalWriteUs.classList.remove("modal-show"):modalMap.classList.remove("modal-show"),modalWriteUs.classList.contains("modal-error")&&modalWriteUs.classList.remove("modal-error"),modalOverlay.classList.remove("overlay-show")},isStorageSupport=!0;try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}for(btnContact.addEventListener("click",function(e){e.preventDefault(),modalWriteUs.classList.add("modal-show"),modalOverlay.classList.add("overlay-show"),isStorageSupport&&(storageName?(nameField.value=storageName,storageEmail?(emailField.value=storageEmail,textField.focus()):emailField.focus()):nameField.focus())}),mapLink.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.add("modal-show"),modalOverlay.classList.add("overlay-show")}),i=0,max=modalClose.length;i<max;i+=1)modalClose[i].addEventListener("click",modalCloseAct);modalOverlay.addEventListener("click",modalCloseAct),window.addEventListener("keydown",function(e){27===e.keyCode&&(modalWriteUs.classList.contains("modal-show")?(e.preventDefault(),modalWriteUs.classList.remove("modal-show")):(e.preventDefault(),modalMap.classList.remove("modal-show")),modalWriteUs.classList.contains("modal-error")&&modalWriteUs.classList.remove("modal-error"),modalOverlay.classList.remove("overlay-show"))}),formWriteUs.addEventListener("submit",function(e){e.preventDefault(),nameField.value&&emailField.value&&textField.value?isStorageSupport&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",emailField.value)):modalWriteUs.classList.add("modal-error")});